# name: automerge
# on:
#   pull_request:
#     types:
#       - labeled
#       - unlabeled
#       - synchronize
#       - opened
#       - edited
#       - ready_for_review
#       - reopened
#       - unlocked
#   # pull_request_review:
#   #   types:
#   #     - submitted
#   # check_suite:
#   #   types:
#   #     - completed
#   status: {}
# jobs:
#   automerge:
#     runs-on: ubuntu-latest
#     steps:
#       - id: automerge
#         name: automerge
#         uses: "pascalgn/automerge-action@v0.15.3"
#         env:
#           GITHUB_TOKEN: "${{ secrets.GITHUB_TOKEN }}"


name: Auto-Merge
on:
  pull_request:
    - labeled

jobs:
  enable-auto-merge:
    runs-on: ubuntu-latest

    # Specifically check that dependabot (or another trusted party) created this pull-request, and that it has been labelled correctly.
    if: contains(github.event.pull_request.labels.*.name, 'automerge')
    steps:
    - uses: alexwilson/enable-github-automerge-action@main
      with:
        github-token: "${{ secrets.GITHUB_TOKEN }}"